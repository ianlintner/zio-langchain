# ZIO LangChain Enhanced Examples

This directory contains enhanced examples demonstrating the capabilities of the ZIO LangChain library, particularly its streaming support, function calling, tool usage, memory systems, and agent frameworks.

## Environment Setup

Before running any examples, ensure you have:

1. **JDK 11 or higher** installed
2. **SBT** installed (for building and running the examples)
3. An **OpenAI API key** (required for all examples)

Set your OpenAI API key as an environment variable:

```bash
export OPENAI_API_KEY=your_api_key_here
```

## Running the Examples

You can run any of the examples using SBT:

```bash
sbt "examples/runMain zio.langchain.examples.<ExampleName>"
```

For example:

```bash
sbt "examples/runMain zio.langchain.examples.AdvancedChat"
```

## Available Examples

### 1. AdvancedChat

**File**: `AdvancedChat.scala`

**Description**: An enhanced chat application that demonstrates:

- Streaming chat responses for real-time token generation
- Function calling with calculator and date/time tools
- Memory integration to maintain conversation context
- Error handling with ZIO best practices

**How to Use**:

- Start a conversation with the assistant
- Ask it to perform calculations like "What is 145 * 32?"
- Ask for date/time information like "What's the current time?"
- The responses will stream token by token for a better user experience

### 2. EnhancedRAG

**File**: `EnhancedRAG.scala`

**Description**: A robust Retrieval-Augmented Generation example that demonstrates:

- Document loading with error recovery
- Efficient embedding creation with progress reporting
- Semantic search with similarity thresholds and fallbacks
- Streaming responses during document processing and answer generation
- Memory integration for conversation context

**How to Use**:

- Place text files in a `docs` directory or use the built-in sample documents
- Ask questions related to the document content
- Type 'clear' to reset the conversation
- Responses will be generated by retrieving relevant document chunks and streaming the answer

### 3. SimpleAgent

**File**: `SimpleAgent.scala`

**Description**: A basic agent implementation that demonstrates:

- Decision-making for tool selection
- ReAct pattern (Reason-Act-Observe) for agent thinking
- Calculator and search tool implementation
- Proper error handling and iteration limits

**How to Use**:

- Ask questions that might require calculation or information lookup
- The agent will decide which tool to use (if any) and return a comprehensive answer
- You can ask complex questions that might require multiple tool calls

## Examples Architecture

### Common Patterns

All examples demonstrate:

1. **ZIO Effect System** - Using ZIO for asynchronous, typed effect handling
2. **Service Pattern** - Using ZIO's service pattern for dependency injection
3. **Streaming** - Using ZStream for real-time response generation
4. **Error Handling** - Proper ZIO error handling with recovery strategies

### Components Demonstrated

1. **LLM Interface** - Enhanced with streaming capabilities and function calling
2. **Memory Systems** - BufferMemory for maintaining conversation context
3. **Retrievers** - Semantic search with embedding similarity
4. **Tools** - Function-calling with specialized tools
5. **Agents** - Decision-making for tool selection and execution

## Expected Outputs

### AdvancedChat

```bash
Welcome to ZIO LangChain Advanced Chat!
This chat supports streaming responses and calculations.
Type 'exit' to quit.

> What's 42 * 13?
Using tools to process your request...
The result of 42 * 13 is 546.

> What time is it now?
Using tools to process your request...
The current time is 15:30:45.

> exit
Goodbye!
```

### EnhancedRAG

```bash
Welcome to ZIO LangChain Enhanced RAG Example!
Loading documents and creating embeddings...
Loaded 5 documents
Created 12 chunks from documents
Creating embeddings for all chunks... (this may take a moment)
Processing chunk 1/12...
Processing chunk 6/12...
Created embeddings for all chunks

Enter your question (or 'exit' to quit, 'clear' to reset conversation):
> What is RAG?

Retrieved 2 relevant documents

Generating response...
RAG (Retrieval-Augmented Generation) is a technique that enhances Large Language Models by retrieving relevant information from external knowledge sources before generating responses. It helps ground the model's outputs in factual, up-to-date information, reducing hallucinations and improving accuracy. In a typical RAG system, user queries are used to search and retrieve relevant documents, which are then provided as context to the LLM for generating answers.

> exit
Goodbye!
```

### SimpleAgent

```bash
Welcome to ZIO LangChain Simple Agent Example!
This agent can use tools to help answer your questions.
Type 'exit' to quit.

Enter your question (or 'exit' to quit):
> What is the square root of 441?

Thinking...

Response:
To find the square root of 441, I'll use the calculator tool.

The square root of 441 is 21.

> exit
Goodbye!
```
